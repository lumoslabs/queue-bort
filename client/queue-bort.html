<head>
  <title>queue-bort</title>
</head>

<body>
  {{loginButtons align="right"}}
  {{> queues}}
</body>

<template name="queues">
  <div id="queues">
    <div class="title">{{title}}</div>
    {{#each envs}}
      {{> deployTargetGroup}}
    {{/each}}
  </div>
</template>

<template name="deployTargetGroup">
  <div class="deployTargetGroup">
    <h3>{{groupName}}</h3>
    {{#each deployTargets}}
      {{> deployTarget}}
    {{/each}}
    {{#if currentUser}}
      <div class="newDeployTarget">+</div>
    {{/if}}
  </div>
</template>

<template name="deployTarget">
  <div class="deployTarget">

    <div class="server">
      {{#if editing}}
        <div class="edit">
          <input class="text-input" id="deployTarget-name-input" type="text" value="{{server}}" />
        </div>
      {{else}}
        <div class="display">
          <h4 class="name">{{server}}</h4>
        </div>
      {{/if}}
    </div>

    <div class="attrs">
      <ol>
        {{#each attrs}}
          <li>
            {{> deployTargetAttr}}
          </li>
        {{/each}}
      </ol>
    </div>

    {{#if currentUser}}
      <div class="controls">
        <div class="delete">x</div>
        <div class="claimer {{claimClass}}">{{claimText}}</div>
      </div>
    {{/if}}
  </div>
</template>

<template name="deployTargetAttr">
  <span class="attrName">{{attrName}}: </span>
  {{#if editingAttr}}
    <input class="text-input" id="deployTarget-name-input" type="text" value="{{attrVal}}" />
  {{else}}
    <span class="attrVal">{{attrVal}}</span>
  {{/if}}
</template>
