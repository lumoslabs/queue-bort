<head>
  <title>queue-bort</title>
</head>

<body>
  {{loginButtons align="right"}}
  {{> queues}}
</body>

<template name="queues">
  <div id="queues">
    <div class="title">{{title}}</div>
    {{#each envs}}
      {{> deployTargetGroup}}
    {{/each}}
  </div>
</template>

<template name="deployTargetGroup">
  <div class="deployTargetGroup">
    <h3>{{groupName}}</h3>
    {{#each deployTargets}}
      {{> deployTarget}}
    {{/each}}
    {{#if adminUser}}
      <div class="newDeployTarget">+</div>
    {{/if}}
  </div>
</template>

<template name="deployTarget">
  <div class="deployTarget">

    <div class="server">
      <span>{{app}} / {{server}}</span>
    </div>

    <div class="attrs">
      <ol>
        {{#each attrs}}
          <li>
            {{> deployTargetAttr}}
          </li>
        {{/each}}
      </ol>
    </div>

    {{#if showQueue}}
      <div class="user-queue">
        <h5>Queue</h5>
        <ol>
          {{#each queueUsers}}
            <li>{{ this }}</li>
          {{/each}}
        </ol>
      </div>
    {{/if}}

    {{#if currentUser}}
      <div class="controls">
        {{#if adminUser}}
          <div class="delete">x</div>
        {{/if}}
        <div class="claimer {{claimClass}}">{{claimText}}</div>
      </div>
    {{/if}}
  </div>
</template>

<template name="deployTargetAttr">
  <span class="attrName">{{attrName}}: </span>
  {{> clickableInput clickVarsForAttr}}
</template>
